<!DOCTYPE html>
<html lang="en">
<head>

<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>IOinterface</title>

<link rel="stylesheet" type="text/css" href="style.css">

<!-- Noto Serif TC -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Noto+Serif+TC:wght@200&display=swap" rel="stylesheet">

<script src="https://code.jquery.com/jquery-1.11.3.min.js"></script>
<script src="https://cdn.bootcss.com/jquery/1.12.4/jquery.min.js"></script>
<script src="https://cdn.bootcss.com/jquery.serializeJSON/2.9.0/jquery.serializejson.js"></script>

<style>
#circle {
  width: 50px;
  height: 50px;
  -webkit-border-radius: 25px;
  -moz-border-radius: 25px;
  border-radius: 25px;
  background: red;
}
</style>
</head>

<body>
<!--<script src="/frontEnd/interFaceJS/audio.js"></script>-->
<div id="circle"></div>
<h2>Recommendation</h2>
<form id="oneSentence" name='oneSentence'>
  <input id='msg' type='text' value='msg' name='usermsg'>
</form>
<button id="btn" onclick="useAjax()" value="send your sentence"/>
<script>
  // special thanks to https://blog.csdn.net/weixin_45050258/article/details/103134233
  var constraints = { audio: true,video:false };
  var useAjax = function() {
    // 待传输数据
    var sentence = JSON.stringify($('#oneSentence').serializeJSON());  // {"usermsg":"msg"}
    console.log(sentence["usermsg"]);
    console.log(sentence);
    var hehe = document.getElementById('msg').value;
    console.log(hehe);

    $.ajax({
      url:"http://192.168.11.242:8988/data_pipeline",
      contentType:"application/json;charser=UTF-8",
      type:"post",
      data: sentence,  // {"username":"chen","nickname":"alien"} 传输待传输数据
            // 传输方式
      dataType:"text", // 预期返回的数据格式
      success:function(data) {  // 这里的data时后端返回的data跟前端的数据没什么关系
        alert(data);
      },
      error:function() {
        alert("请求出错！");
      }
    });
  };
</script>
</body>
</html>
